"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const test_1 = require("@playwright/test");
const createIntent_request_1 = require("../api/requests/createIntent.request");
const variableFactory_1 = require("../helpers/variableFactory");
const objectFactory_1 = require("../helpers/objectFactory");
const createIntent_payload_1 = require("../api/payloads/createIntent.payload");
const common_base_1 = require("@siddheshwar.anajekar/common-base");
const common_base_2 = require("@siddheshwar.anajekar/common-base");
const createIntent_response_1 = require("../api/response/createIntent.response");
const apiUtils_1 = require("../utils/apiUtils");
(0, test_1.test)('Create Intent', async ({ page, request }) => {
    const commonU = new common_base_1.commonUtils(page);
    common_base_2.AssertionUtils.softVerifyTrue(true);
    variableFactory_1.VariableFactory.setEnvorimentData('qat');
    // console.log("VariableFactory instance:", VariableFactory);
    objectFactory_1.ObjectFactory.setRequest(request);
    const payload = createIntent_payload_1.CreateIntentPaylod.getPaylodWithDefaultValues({ additionalDetailsPreference: '1' });
    console.log(payload);
    console.log("Anddone JS:[]" + variableFactory_1.VariableFactory.getAndDoneJsPortalUrl());
    const response = await createIntent_request_1.CreateIntentRequest.createIntent(payload, { appKey: "KvoMzo8y", apiKey: "H8cX7qZssVi3Gck+4cuuucuft0oUCMCKZHvxPe+OxLQ=" });
    const responseCode = response.status();
    variableFactory_1.VariableFactory.setResponseCode(responseCode);
    console.log('responsebody:' + variableFactory_1.VariableFactory.getResponseBody());
    (0, test_1.expect)(responseCode).toEqual(201);
    const responseBody = await response.json();
    variableFactory_1.VariableFactory.setResponseBody(responseBody);
    console.log(responseBody.paymentToken);
    console.log('Payment Token' + createIntent_response_1.CreateIntentResponse.getPaymentIntentId());
    console.log(apiUtils_1.ApiUtils.getResponseValue('intent.paymentTypes'));
});
